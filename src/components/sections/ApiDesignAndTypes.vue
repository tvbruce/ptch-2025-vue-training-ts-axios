<template>
  <div class="api-design-section">
    <!-- ç« ç¯€ä»‹ç´¹ -->
    <div class="section-intro">
      <h2>API è¦æ ¼è¨­è¨ˆèˆ‡å‹åˆ¥å®šç¾©</h2>
      <p class="intro-text">
        åœ¨ç¾ä»£ Web é–‹ç™¼ä¸­ï¼ŒAPI å„ªå…ˆçš„è¨­è¨ˆæ–¹æ³•å·²æˆç‚ºæœ€ä½³å¯¦è¸ã€‚æœ¬ç« ç¯€å°‡å¸¶æ‚¨äº†è§£å¾ API è¦æ ¼è¨­è¨ˆåˆ° TypeScript å‹åˆ¥å®šç¾©çš„å®Œæ•´é–‹ç™¼æµç¨‹ï¼Œ
        åŒ…æ‹¬ OpenAPI/Swagger è¦æ ¼åˆ¶å®šã€è‡ªå‹•åŒ–å‹åˆ¥ç”Ÿæˆï¼Œä»¥åŠèˆ‡ C# Web API é–‹ç™¼çš„å°æ¯”ã€‚
      </p>
      
      <div class="learning-objectives">
        <h3>å­¸ç¿’ç›®æ¨™</h3>
        <ul>
          <li>ç†è§£ API å„ªå…ˆè¨­è¨ˆçš„é‡è¦æ€§</li>
          <li>æŒæ¡ OpenAPI/Swagger è¦æ ¼æ’°å¯«</li>
          <li>å­¸æœƒå¾ API è¦æ ¼è‡ªå‹•ç”Ÿæˆ TypeScript å‹åˆ¥</li>
          <li>äº†è§£èˆ‡ C# Web API é–‹ç™¼çš„ç•°åŒ</li>
          <li>å»ºç«‹å‹åˆ¥å®‰å…¨çš„å‰å¾Œç«¯å”ä½œæµç¨‹</li>
        </ul>
      </div>
    </div>

    <!-- API å„ªå…ˆè¨­è¨ˆæ¦‚å¿µ -->
    <div class="content-section">
      <h3>1. API å„ªå…ˆè¨­è¨ˆæ–¹æ³•</h3>
      <p>API å„ªå…ˆè¨­è¨ˆæ˜¯æŒ‡åœ¨é–‹å§‹ç·¨å¯«ä»£ç¢¼ä¹‹å‰ï¼Œå…ˆè¨­è¨ˆå’Œå®šç¾© API è¦æ ¼çš„é–‹ç™¼æ–¹æ³•ã€‚</p>
      
      <div class="comparison-container">
        <div class="comparison-item bad">
          <h4>âŒ å‚³çµ±é–‹ç™¼æµç¨‹</h4>
          <div class="flow-steps">
            <div class="step">1. é–‹å§‹ç·¨å¯«å¾Œç«¯ä»£ç¢¼</div>
            <div class="step">2. å¯¦ä½œ API ç«¯é»</div>
            <div class="step">3. æ’°å¯« API æ–‡æª”</div>
            <div class="step">4. å‰ç«¯é–‹å§‹ä¸²æ¥</div>
            <div class="step">5. ç™¼ç¾å•é¡Œï¼Œé‡è¤‡ä¿®æ”¹</div>
          </div>
          <div class="problems">
            <strong>å•é¡Œï¼š</strong>
            <ul>
              <li>å‰å¾Œç«¯é–‹ç™¼ä¸åŒæ­¥</li>
              <li>API è¨­è¨ˆä¸ä¸€è‡´</li>
              <li>æ–‡æª”èˆ‡å¯¦ä½œä¸ç¬¦</li>
              <li>é‡è¤‡ä¿®æ”¹æˆæœ¬é«˜</li>
            </ul>
          </div>
        </div>

        <div class="comparison-item good">
          <h4>âœ… API å„ªå…ˆè¨­è¨ˆæµç¨‹</h4>
          <div class="flow-steps">
            <div class="step">1. è¨­è¨ˆ API è¦æ ¼ (OpenAPI)</div>
            <div class="step">2. åœ˜éšŠå¯©æŸ¥ç¢ºèªè¦æ ¼</div>
            <div class="step">3. ç”Ÿæˆå‹åˆ¥å®šç¾©å’Œ Mock</div>
            <div class="step">4. å‰å¾Œç«¯ä¸¦è¡Œé–‹ç™¼</div>
            <div class="step">5. åŸºæ–¼è¦æ ¼é€²è¡Œæ¸¬è©¦</div>
          </div>
          <div class="benefits">
            <strong>å„ªå‹¢ï¼š</strong>
            <ul>
              <li>å‰å¾Œç«¯é–‹ç™¼åŒæ­¥</li>
              <li>API è¨­è¨ˆä¸€è‡´æ€§</li>
              <li>æ–‡æª”èˆ‡å¯¦ä½œåŒæ­¥</li>
              <li>æ¸›å°‘æºé€šæˆæœ¬</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- OpenAPI/Swagger è¦æ ¼æ’°å¯« -->
    <div class="content-section">
      <h3>2. OpenAPI/Swagger è¦æ ¼æ’°å¯«</h3>
      <p>OpenAPIï¼ˆåŸ Swaggerï¼‰æ˜¯ç›®å‰æœ€æµè¡Œçš„ API è¦æ ¼æ¨™æº–ï¼Œæä¾›äº†å®Œæ•´çš„ REST API æè¿°æ ¼å¼ã€‚</p>

      <CodeBlock
        title="OpenAPI 3.0 åŸºç¤è¦æ ¼ç¯„ä¾‹"
        :code="openApiExample"
        language="yaml"
        :explanation="'é€™æ˜¯ä¸€å€‹å®Œæ•´çš„ç”¨æˆ¶ç®¡ç† API è¦æ ¼ï¼ŒåŒ…å«äº†æ‰€æœ‰å¿…è¦çš„çµ„ä»¶å®šç¾©'"
      />

      <div class="dotnet-comparison">
        <h4>ğŸ”— èˆ‡ C# Web API çš„å°æ¯”</h4>
        <p class="comparison-intro">
          å°æ–¼ .NET é–‹ç™¼äººå“¡ä¾†èªªï¼ŒOpenAPI è¦æ ¼èˆ‡ C# Web API çš„æ¦‚å¿µéå¸¸ç›¸ä¼¼ã€‚
          ä»¥ä¸‹å±•ç¤ºç›¸åŒåŠŸèƒ½åœ¨å…©ç¨®æŠ€è¡“ä¸­çš„å¯¦ç¾æ–¹å¼ï¼š
        </p>
        
        <div class="comparison-section">
          <div class="comparison-item">
            <h5>C# Web API (ASP.NET Core)</h5>
            <CodeBlock
              title="C# Controller ç¯„ä¾‹"
              :code="csharpControllerExample"
              language="csharp"
              :explanation="'C# ä¸­ä½¿ç”¨å±¬æ€§å’Œå¼·å‹åˆ¥ä¾†å®šç¾© API'"
            />
          </div>
          
          <div class="comparison-divider">
            <span class="divider-text">å°æ‡‰</span>
          </div>
          
          <div class="comparison-item">
            <h5>OpenAPI è¦æ ¼</h5>
            <CodeBlock
              title="å°æ‡‰çš„ OpenAPI è¦æ ¼"
              :code="openApiPathExample"
              language="yaml"
              :explanation="'OpenAPI ç”¨ YAML/JSON æè¿°ç›¸åŒçš„ API çµæ§‹'"
            />
          </div>
        </div>

        <div class="comparison-insights">
          <h5>ğŸ” é—œéµå°æ¯”æ´å¯Ÿ</h5>
          <div class="insights-grid">
            <div class="insight-item">
              <h6>å‹åˆ¥å®šç¾©</h6>
              <p>C# ä½¿ç”¨å¼·å‹åˆ¥é¡åˆ¥ï¼ŒOpenAPI ä½¿ç”¨ JSON Schema æè¿°</p>
            </div>
            <div class="insight-item">
              <h6>è·¯ç”±å®šç¾©</h6>
              <p>C# ä½¿ç”¨ Route å±¬æ€§ï¼ŒOpenAPI ä½¿ç”¨è·¯å¾‘ç‰©ä»¶</p>
            </div>
            <div class="insight-item">
              <h6>åƒæ•¸é©—è­‰</h6>
              <p>C# ä½¿ç”¨ Data Annotationsï¼ŒOpenAPI ä½¿ç”¨ schema é©—è­‰</p>
            </div>
            <div class="insight-item">
              <h6>æ–‡æª”ç”Ÿæˆ</h6>
              <p>C# éœ€è¦é¡å¤–å·¥å…·ï¼ŒOpenAPI æœ¬èº«å°±æ˜¯æ–‡æª”</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- TypeScript å‹åˆ¥ç”Ÿæˆ -->
    <div class="content-section">
      <h3>3. å¾ OpenAPI ç”Ÿæˆ TypeScript å‹åˆ¥</h3>
      <p>é€éå·¥å…·å¯ä»¥å¾ OpenAPI è¦æ ¼è‡ªå‹•ç”Ÿæˆ TypeScript å‹åˆ¥å®šç¾©ï¼Œç¢ºä¿å‰å¾Œç«¯å‹åˆ¥ä¸€è‡´æ€§ã€‚</p>

      <div class="tools-section">
        <h4>å¸¸ç”¨çš„å‹åˆ¥ç”Ÿæˆå·¥å…·</h4>
        <div class="tools-grid">
          <div class="tool-card">
            <h5>openapi-typescript</h5>
            <p>è¼•é‡ç´šå·¥å…·ï¼Œå°ˆæ³¨æ–¼å‹åˆ¥ç”Ÿæˆ</p>
            <CodeBlock
              title="å®‰è£èˆ‡ä½¿ç”¨"
              :code="openapiTypescriptExample"
              language="bash"
              :explanation="'æœ€ç°¡å–®çš„å‹åˆ¥ç”Ÿæˆæ–¹æ¡ˆ'"
            />
          </div>
          
          <div class="tool-card">
            <h5>swagger-typescript-api</h5>
            <p>åŠŸèƒ½å®Œæ•´ï¼Œå¯ç”Ÿæˆ API å®¢æˆ¶ç«¯</p>
            <CodeBlock
              title="å®‰è£èˆ‡ä½¿ç”¨"
              :code="swaggerTypescriptApiExample"
              language="bash"
              :explanation="'ç”Ÿæˆå®Œæ•´çš„ API å®¢æˆ¶ç«¯ä»£ç¢¼'"
            />
          </div>

          <div class="tool-card featured">
            <h5>OpenAPI Generator</h5>
            <p>æ¥­ç•Œæ¨™æº–çš„å¤šèªè¨€ä»£ç¢¼ç”Ÿæˆå·¥å…·</p>
            <CodeBlock
              title="å®‰è£èˆ‡ä½¿ç”¨"
              :code="openapiGeneratorExample"
              language="bash"
              :explanation="'æ”¯æ´ 50+ ç¨®ç¨‹å¼èªè¨€çš„å¼·å¤§å·¥å…·'"
            />
          </div>
        </div>

        <div class="openapi-generator-showcase">
          <h4>ğŸš€ OpenAPI Generator - æ¥­ç•Œæ¨™æº–è§£æ±ºæ–¹æ¡ˆ</h4>
          <p>
            <a href="https://github.com/OpenAPITools/openapi-generator" target="_blank" rel="noopener">OpenAPI Generator</a> 
            æ˜¯ç›®å‰æœ€æˆç†Ÿä¸”åŠŸèƒ½æœ€å®Œæ•´çš„ OpenAPI ä»£ç¢¼ç”Ÿæˆå·¥å…·ï¼Œæ“æœ‰è¶…é 24,000 å€‹ GitHub æ˜Ÿæ¨™ï¼Œæ”¯æ´ 50+ ç¨®ç¨‹å¼èªè¨€ã€‚
          </p>
          
          <div class="generator-features">
            <div class="feature-category">
              <h5>ğŸ¯ æ”¯æ´çš„èªè¨€èˆ‡æ¡†æ¶</h5>
              <div class="language-tags">
                <span class="lang-tag">TypeScript</span>
                <span class="lang-tag">JavaScript</span>
                <span class="lang-tag">C#</span>
                <span class="lang-tag">Java</span>
                <span class="lang-tag">Python</span>
                <span class="lang-tag">PHP</span>
                <span class="lang-tag">Go</span>
                <span class="lang-tag">Rust</span>
                <span class="lang-tag">Swift</span>
                <span class="lang-tag">Kotlin</span>
                <span class="lang-tag more">+40 more</span>
              </div>
            </div>

            <div class="feature-category">
              <h5>âš¡ ç”Ÿæˆå…§å®¹</h5>
              <ul>
                <li><strong>å®¢æˆ¶ç«¯ SDK</strong>ï¼šå®Œæ•´çš„ API å®¢æˆ¶ç«¯åº«</li>
                <li><strong>ä¼ºæœå™¨å­˜æ ¹</strong>ï¼šå¾Œç«¯ API æ¡†æ¶ä»£ç¢¼</li>
                <li><strong>å‹åˆ¥å®šç¾©</strong>ï¼šå¼·å‹åˆ¥çš„è³‡æ–™æ¨¡å‹</li>
                <li><strong>API æ–‡æª”</strong>ï¼šäº’å‹•å¼æ–‡æª”ç¶²ç«™</li>
                <li><strong>æ¸¬è©¦ä»£ç¢¼</strong>ï¼šå–®å…ƒæ¸¬è©¦ç¯„æœ¬</li>
                <li><strong>é…ç½®æª”æ¡ˆ</strong>ï¼šå°ˆæ¡ˆè¨­å®šæª”</li>
              </ul>
            </div>
          </div>

          <div class="real-world-benefit">
            <h5>ğŸ’¡ å¯¦éš›é–‹ç™¼æ•ˆç›Š</h5>
            <div class="benefit-comparison">
              <div class="before-after">
                <div class="before">
                  <h6>âŒ å‚³çµ±æ‰‹å‹•é–‹ç™¼</h6>
                  <ul>
                    <li>æ‰‹å‹•ç·¨å¯« API å®¢æˆ¶ç«¯ä»£ç¢¼</li>
                    <li>é€ä¸€å®šç¾©è³‡æ–™æ¨¡å‹</li>
                    <li>ç¶­è­·å¤šå€‹èªè¨€ç‰ˆæœ¬</li>
                    <li>æ‰‹å‹•åŒæ­¥ API è®Šæ›´</li>
                    <li>å®¹æ˜“å‡ºç¾ä¸ä¸€è‡´å•é¡Œ</li>
                  </ul>
                </div>
                <div class="after">
                  <h6>âœ… ä½¿ç”¨ OpenAPI Generator</h6>
                  <ul>
                    <li>ä¸€éµç”Ÿæˆå®Œæ•´ SDK</li>
                    <li>è‡ªå‹•å‰µå»ºå‹åˆ¥å®‰å…¨çš„æ¨¡å‹</li>
                    <li>åŒæ™‚æ”¯æ´å¤šç¨®èªè¨€</li>
                    <li>API è®Šæ›´è‡ªå‹•åæ˜ </li>
                    <li>ç¢ºä¿è·¨å¹³å°ä¸€è‡´æ€§</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <CodeBlock
            title="OpenAPI Generator å¯¦éš›ä½¿ç”¨ç¯„ä¾‹"
            :code="openapiGeneratorUsageExample"
            language="bash"
            :explanation="'å¾å–®ä¸€ OpenAPI è¦æ ¼ç”Ÿæˆå¤šèªè¨€å®¢æˆ¶ç«¯åº«çš„å®Œæ•´æµç¨‹'"
          />
        </div>
      </div>

      <div class="generated-types-example">
        <h4>ç”Ÿæˆçš„ TypeScript å‹åˆ¥ç¯„ä¾‹</h4>
        <CodeBlock
          title="è‡ªå‹•ç”Ÿæˆçš„å‹åˆ¥å®šç¾©"
          :code="generatedTypesExample"
          language="typescript"
          :explanation="'å¾ OpenAPI è¦æ ¼è‡ªå‹•ç”Ÿæˆçš„ TypeScript å‹åˆ¥ï¼Œç¢ºä¿èˆ‡å¾Œç«¯ API å®Œå…¨ä¸€è‡´'"
        />
      </div>
    </div>

    <!-- å¯¦éš›é–‹ç™¼æµç¨‹ -->
    <div class="content-section">
      <h3>4. å¯¦éš›é–‹ç™¼æµç¨‹æ•´åˆ</h3>
      <p>å°‡ API è¦æ ¼è¨­è¨ˆæ•´åˆåˆ°å¯¦éš›çš„é–‹ç™¼å·¥ä½œæµç¨‹ä¸­ã€‚</p>

      <div class="workflow-steps">
        <div class="workflow-step">
          <div class="step-number">1</div>
          <div class="step-content">
            <h4>API è¦æ ¼è¨­è¨ˆ</h4>
            <p>ä½¿ç”¨ Swagger Editor æˆ– VS Code æ“´å……å¥—ä»¶è¨­è¨ˆ API</p>
            <CodeBlock
              title="å°ˆæ¡ˆçµæ§‹"
              :code="projectStructureExample"
              language="text"
              :explanation="'å»ºè­°çš„å°ˆæ¡ˆçµæ§‹ï¼Œå°‡ API è¦æ ¼æ”¾åœ¨å°ˆé–€ç›®éŒ„'"
            />
          </div>
        </div>

        <div class="workflow-step">
          <div class="step-number">2</div>
          <div class="step-content">
            <h4>è‡ªå‹•åŒ–å‹åˆ¥ç”Ÿæˆ</h4>
            <p>è¨­å®š npm scripts è‡ªå‹•ç”Ÿæˆå‹åˆ¥</p>
            <CodeBlock
              title="package.json scripts"
              :code="packageScriptsExample"
              language="json"
              :explanation="'è‡ªå‹•åŒ–è…³æœ¬ï¼Œç¢ºä¿å‹åˆ¥å®šç¾©å§‹çµ‚èˆ‡ API è¦æ ¼åŒæ­¥'"
            />
          </div>
        </div>

        <div class="workflow-step">
          <div class="step-number">3</div>
          <div class="step-content">
            <h4>å‹åˆ¥å®‰å…¨çš„ API å®¢æˆ¶ç«¯</h4>
            <p>ä½¿ç”¨ç”Ÿæˆçš„å‹åˆ¥å»ºç«‹å‹åˆ¥å®‰å…¨çš„ API å®¢æˆ¶ç«¯</p>
            <CodeBlock
              title="å‹åˆ¥å®‰å…¨çš„ API å®¢æˆ¶ç«¯"
              :code="typeSafeApiClientExample"
              language="typescript"
              :explanation="'ä½¿ç”¨ç”Ÿæˆçš„å‹åˆ¥ç¢ºä¿ API èª¿ç”¨çš„å‹åˆ¥å®‰å…¨'"
            />
          </div>
        </div>
      </div>
    </div>

    <!-- æœ€ä½³å¯¦è¸ -->
    <div class="content-section">
      <h3>5. API è¨­è¨ˆæœ€ä½³å¯¦è¸</h3>
      
      <div class="best-practices">
        <div class="practice-category">
          <h4>å‘½åè¦ç¯„</h4>
          <ul>
            <li>ä½¿ç”¨è¤‡æ•¸åè©ä½œç‚ºè³‡æºåç¨±ï¼ˆusers, productsï¼‰</li>
            <li>ä½¿ç”¨ kebab-case æˆ– camelCase ä¿æŒä¸€è‡´</li>
            <li>é¿å…å‹•è©ï¼Œä½¿ç”¨ HTTP æ–¹æ³•è¡¨é”å‹•ä½œ</li>
            <li>ç‰ˆæœ¬æ§åˆ¶ä½¿ç”¨ /v1, /v2 å‰ç¶´</li>
          </ul>
        </div>

        <div class="practice-category">
          <h4>ç‹€æ…‹ç¢¼ä½¿ç”¨</h4>
          <ul>
            <li>200 OK - æˆåŠŸç²å–è³‡æº</li>
            <li>201 Created - æˆåŠŸå‰µå»ºè³‡æº</li>
            <li>400 Bad Request - è«‹æ±‚åƒæ•¸éŒ¯èª¤</li>
            <li>401 Unauthorized - æœªæˆæ¬Š</li>
            <li>404 Not Found - è³‡æºä¸å­˜åœ¨</li>
            <li>500 Internal Server Error - ä¼ºæœå™¨éŒ¯èª¤</li>
          </ul>
        </div>

        <div class="practice-category">
          <h4>å›æ‡‰æ ¼å¼çµ±ä¸€</h4>
          <CodeBlock
            title="çµ±ä¸€çš„ API å›æ‡‰æ ¼å¼"
            :code="apiResponseFormatExample"
            language="typescript"
            :explanation="'å»ºç«‹ä¸€è‡´çš„ API å›æ‡‰æ ¼å¼ï¼Œä¾¿æ–¼å‰ç«¯è™•ç†'"
          />
        </div>
      </div>
    </div>

    <!-- è‡ªå‹•ç”Ÿæˆå‹åˆ¥çš„å¯¦éš›å¥½è™• -->
    <div class="content-section">
      <h3>6. OpenAPI è‡ªå‹•ç”Ÿæˆå‹åˆ¥çš„å¯¦éš›å¥½è™•</h3>
      <p>é€é OpenAPI è¦æ ¼è‡ªå‹•ç”Ÿæˆ TypeScript å‹åˆ¥å®šç¾©ï¼Œç‚ºé–‹ç™¼åœ˜éšŠå¸¶ä¾†é¡¯è‘—çš„æ•ˆç‡æå‡å’Œå“è³ªä¿è­‰ã€‚</p>
      
      <div class="benefits-showcase">
        <div class="benefit-item">
          <h4>ğŸš€ é–‹ç™¼æ•ˆç‡æå‡</h4>
          <ul>
            <li><strong>é›¶æ‰‹å‹•ç¶­è­·</strong>ï¼šå‹åˆ¥å®šç¾©è‡ªå‹•èˆ‡ API è¦æ ¼åŒæ­¥</li>
            <li><strong>å³æ™‚æ›´æ–°</strong>ï¼šAPI è®Šæ›´æ™‚ä¸€éµæ›´æ–°æ‰€æœ‰å‹åˆ¥</li>
            <li><strong>æ¸›å°‘æºé€šæˆæœ¬</strong>ï¼šå‰å¾Œç«¯åŸºæ–¼åŒä¸€ä»½è¦æ ¼é–‹ç™¼</li>
            <li><strong>å¿«é€Ÿä¸Šæ‰‹</strong>ï¼šæ–°åœ˜éšŠæˆå“¡å¯ç›´æ¥ä½¿ç”¨ç”Ÿæˆçš„å‹åˆ¥</li>
          </ul>
        </div>

        <div class="benefit-item">
          <h4>ğŸ›¡ï¸ å‹åˆ¥å®‰å…¨ä¿éšœ</h4>
          <ul>
            <li><strong>ç·¨è­¯æ™‚æª¢æŸ¥</strong>ï¼šåœ¨é–‹ç™¼éšæ®µå°±ç™¼ç¾ API èª¿ç”¨éŒ¯èª¤</li>
            <li><strong>è‡ªå‹•è£œå…¨</strong>ï¼šIDE æä¾›ç²¾ç¢ºçš„ç¨‹å¼ç¢¼æç¤º</li>
            <li><strong>é‡æ§‹å®‰å…¨</strong>ï¼šAPI è®Šæ›´æ™‚ TypeScript æœƒæ¨™ç¤ºæ‰€æœ‰å½±éŸ¿é»</li>
            <li><strong>æ–‡æª”å³ç¨‹å¼ç¢¼</strong>ï¼šå‹åˆ¥å®šç¾©å°±æ˜¯æœ€æº–ç¢ºçš„ API æ–‡æª”</li>
          </ul>
        </div>

        <div class="benefit-item">
          <h4>âš¡ åœ˜éšŠå”ä½œå„ªå‹¢</h4>
          <ul>
            <li><strong>çµ±ä¸€æ¨™æº–</strong>ï¼šæ‰€æœ‰é–‹ç™¼è€…ä½¿ç”¨ç›¸åŒçš„å‹åˆ¥å®šç¾©</li>
            <li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šå‹åˆ¥è®Šæ›´å¯è¿½è¹¤å’Œå›æ»¾</li>
            <li><strong>æ¸¬è©¦å‹å–„</strong>ï¼šMock è³‡æ–™ä¹Ÿèƒ½äº«å—å‹åˆ¥å®‰å…¨</li>
            <li><strong>CI/CD æ•´åˆ</strong>ï¼šè‡ªå‹•åŒ–æµç¨‹ç¢ºä¿å‹åˆ¥åŒæ­¥</li>
          </ul>
        </div>
      </div>

      <div class="real-world-example">
        <h4>å¯¦éš›é–‹ç™¼æƒ…å¢ƒå°æ¯”</h4>
        <div class="scenario-comparison">
          <div class="scenario-item without-types">
            <h5>âŒ æ²’æœ‰è‡ªå‹•ç”Ÿæˆå‹åˆ¥</h5>
            <div class="scenario-problems">
              <p><strong>å¸¸è¦‹å•é¡Œï¼š</strong></p>
              <ul>
                <li>æ‰‹å‹•ç¶­è­·å‹åˆ¥å®šç¾©ï¼Œå®¹æ˜“éæ™‚</li>
                <li>API æ¬„ä½åç¨±æ‹¼éŒ¯ï¼ŒåŸ·è¡Œæ™‚æ‰ç™¼ç¾</li>
                <li>æ–°å¢ API æ¬„ä½å¿˜è¨˜æ›´æ–°å‰ç«¯å‹åˆ¥</li>
                <li>ä¸åŒé–‹ç™¼è€…å®šç¾©ä¸ä¸€è‡´çš„å‹åˆ¥</li>
                <li>é‡æ§‹æ™‚éºæ¼æ›´æ–°ç›¸é—œå‹åˆ¥</li>
              </ul>
            </div>
          </div>

          <div class="scenario-item with-types">
            <h5>âœ… ä½¿ç”¨ OpenAPI è‡ªå‹•ç”Ÿæˆ</h5>
            <div class="scenario-benefits">
              <p><strong>é–‹ç™¼é«”é©—ï¼š</strong></p>
              <ul>
                <li>ä¸€æ¬¡è¨­å®šï¼Œæ°¸ä¹…å—ç›Š</li>
                <li>ç·¨è¼¯å™¨æ™ºèƒ½æç¤ºï¼Œæ¸›å°‘éŒ¯èª¤</li>
                <li>API è®Šæ›´ç«‹å³åæ˜ åœ¨å‹åˆ¥ä¸Š</li>
                <li>åœ˜éšŠä½¿ç”¨çµ±ä¸€ã€æº–ç¢ºçš„å‹åˆ¥</li>
                <li>é‡æ§‹æ™‚ TypeScript è‡ªå‹•æª¢æŸ¥</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="workflow-automation">
        <h4>è‡ªå‹•åŒ–å·¥ä½œæµç¨‹ç¯„ä¾‹</h4>
        <CodeBlock
          title="å®Œæ•´çš„è‡ªå‹•åŒ–æµç¨‹"
          :code="automationWorkflowExample"
          language="yaml"
          :explanation="'GitHub Actions è‡ªå‹•åŒ–æµç¨‹ï¼ŒAPI è¦æ ¼æ›´æ–°æ™‚è‡ªå‹•ç”Ÿæˆæ–°çš„å‹åˆ¥å®šç¾©'"
        />
      </div>
    </div>

    <!-- æœ¬ç« ç¸½çµ -->
    <div class="section-summary">
      <h3>æœ¬ç« ç¸½çµ</h3>
      <div class="summary-points">
        <div class="summary-point">
          <h4>API å„ªå…ˆè¨­è¨ˆ</h4>
          <p>å¾ API è¦æ ¼é–‹å§‹ï¼Œç¢ºä¿å‰å¾Œç«¯é–‹ç™¼åŒæ­¥</p>
        </div>
        <div class="summary-point">
          <h4>OpenAPI è¦æ ¼</h4>
          <p>ä½¿ç”¨æ¨™æº–åŒ–çš„ API æè¿°æ ¼å¼</p>
        </div>
        <div class="summary-point">
          <h4>è‡ªå‹•åŒ–å‹åˆ¥ç”Ÿæˆ</h4>
          <p>å¾ API è¦æ ¼è‡ªå‹•ç”Ÿæˆ TypeScript å‹åˆ¥</p>
        </div>
        <div class="summary-point">
          <h4>é–‹ç™¼æµç¨‹æ•´åˆ</h4>
          <p>å°‡ API è¨­è¨ˆæ•´åˆåˆ°æ—¥å¸¸é–‹ç™¼å·¥ä½œæµç¨‹</p>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import CodeBlock from '@/components/common/CodeBlock.vue'

// OpenAPI è¦æ ¼ç¯„ä¾‹
const openApiExample = ref(`openapi: 3.0.3
info:
  title: ç”¨æˆ¶ç®¡ç† API
  description: å®Œæ•´çš„ç”¨æˆ¶ç®¡ç†ç³»çµ± API
  version: 1.0.0
  contact:
    name: API é–‹ç™¼åœ˜éšŠ
    email: api@example.com

servers:
  - url: https://api.example.com/v1
    description: ç”Ÿç”¢ç’°å¢ƒ
  - url: https://staging-api.example.com/v1
    description: æ¸¬è©¦ç’°å¢ƒ

paths:
  /users:
    get:
      summary: ç²å–ç”¨æˆ¶åˆ—è¡¨
      tags: [Users]
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: æˆåŠŸç²å–ç”¨æˆ¶åˆ—è¡¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserListResponse'

components:
  schemas:
    User:
      type: object
      required: [id, name, email]
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "å¼µä¸‰"
        email:
          type: string
          format: email
          example: "zhang@example.com"`)

// C# Controller ç¯„ä¾‹
const csharpControllerExample = ref(`[ApiController]
[Route("api/v1/[controller]")]
public class UsersController : ControllerBase
{
    [HttpGet]
    [ProducesResponseType(typeof(UserListResponse), 200)]
    public async Task<ActionResult<UserListResponse>> GetUsers(
        [FromQuery] int page = 1,
        [FromQuery] int limit = 10)
    {
        var users = await _userService.GetUsersAsync(page, limit);
        return Ok(new UserListResponse 
        { 
            Success = true, 
            Data = users
        });
    }
}`)

// OpenAPI è·¯å¾‘ç¯„ä¾‹
const openApiPathExample = ref(`/users:
  get:
    summary: ç²å–ç”¨æˆ¶åˆ—è¡¨
    parameters:
      - name: page
        in: query
        schema:
          type: integer
          default: 1
    responses:
      '200':
        description: æˆåŠŸç²å–ç”¨æˆ¶åˆ—è¡¨`)

// å‹åˆ¥ç”Ÿæˆå·¥å…·ç¯„ä¾‹
const openapiTypescriptExample = ref(`# å®‰è£
npm install -D openapi-typescript

# ç”Ÿæˆå‹åˆ¥
npx openapi-typescript ./api/openapi.yaml -o ./src/types/api.ts`)

const swaggerTypescriptApiExample = ref(`# å®‰è£
npm install -D swagger-typescript-api

# ç”Ÿæˆ API å®¢æˆ¶ç«¯
npx swagger-typescript-api -p ./api/openapi.yaml -o ./src/api`)

// ç”Ÿæˆçš„å‹åˆ¥ç¯„ä¾‹
const generatedTypesExample = ref(`// è‡ªå‹•ç”Ÿæˆçš„å‹åˆ¥å®šç¾©
export interface User {
  id: number;
  name: string;
  email: string;
  avatar?: string;
}

export interface UserListResponse {
  success?: boolean;
  data?: User[];
}`)

// å°ˆæ¡ˆçµæ§‹ç¯„ä¾‹
const projectStructureExample = ref(`project/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ openapi.yaml
â”‚   â””â”€â”€ schemas/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ api.ts
â”‚   â””â”€â”€ api/
â””â”€â”€ package.json`)

// package.json scripts ç¯„ä¾‹
const packageScriptsExample = ref(`{
  "scripts": {
    "api:generate": "openapi-typescript ./api/openapi.yaml -o ./src/types/api.ts",
    "api:validate": "swagger-codegen validate -i ./api/openapi.yaml"
  }
}`)

// å‹åˆ¥å®‰å…¨çš„ API å®¢æˆ¶ç«¯ç¯„ä¾‹
const typeSafeApiClientExample = ref(`import type { User, UserListResponse } from '@/types/api';

class TypeSafeApiClient {
  async getUsers(params?: {
    page?: number;
    limit?: number;
  }): Promise<UserListResponse> {
    const response = await this.client.get('/users', { params });
    return response.data;
  }
}`)

// API å›æ‡‰æ ¼å¼ç¯„ä¾‹
const apiResponseFormatExample = ref(`interface ApiResponse<T = unknown> {
  success: boolean;
  data?: T;
  message?: string;
  errors?: string[];
}`)

// è‡ªå‹•åŒ–å·¥ä½œæµç¨‹ç¯„ä¾‹
const automationWorkflowExample = ref(`# .github/workflows/api-types.yml
name: è‡ªå‹•æ›´æ–° API å‹åˆ¥å®šç¾©

on:
  push:
    paths:
      - 'api/openapi.yaml'
  pull_request:
    paths:
      - 'api/openapi.yaml'

jobs:
  update-types:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'
          
      - name: Install dependencies
        run: npm ci
        
      - name: Generate TypeScript types
        run: npm run api:generate
        
      - name: Check for changes
        run: |
          if [[ \`git status --porcelain\` ]]; then
            echo "å‹åˆ¥å®šç¾©å·²æ›´æ–°"
            git config --local user.email "action@github.com"
            git config --local user.name "GitHub Action"
            git add src/types/api.ts
            git commit -m "è‡ªå‹•æ›´æ–° API å‹åˆ¥å®šç¾©"
            git push
          else
            echo "ç„¡éœ€æ›´æ–°å‹åˆ¥å®šç¾©"
          fi`)

// OpenAPI Generator ç¯„ä¾‹
const openapiGeneratorExample = ref(`# å®‰è£ OpenAPI Generator
npm install -g @openapitools/openapi-generator-cli

# ç”Ÿæˆ TypeScript å®¢æˆ¶ç«¯
openapi-generator-cli generate \\
  -i ./api/openapi.yaml \\
  -g typescript-axios \\
  -o ./src/generated/api

# ç”Ÿæˆ C# å®¢æˆ¶ç«¯
openapi-generator-cli generate \\
  -i ./api/openapi.yaml \\
  -g csharp \\
  -o ./clients/csharp`)

// OpenAPI Generator ä½¿ç”¨ç¯„ä¾‹
const openapiGeneratorUsageExample = ref(`# åŒæ™‚ç”Ÿæˆå¤šç¨®èªè¨€çš„å®¢æˆ¶ç«¯åº«

# TypeScript + Axios å®¢æˆ¶ç«¯
openapi-generator-cli generate \\
  -i ./api/openapi.yaml \\
  -g typescript-axios \\
  -o ./clients/typescript \\
  --additional-properties=withInterfaces=true

# C# å®¢æˆ¶ç«¯ (é©åˆ .NET é–‹ç™¼äººå“¡)
openapi-generator-cli generate \\
  -i ./api/openapi.yaml \\
  -g csharp \\
  -o ./clients/csharp \\
  --additional-properties=packageName=MyApi.Client

# Java å®¢æˆ¶ç«¯
openapi-generator-cli generate \\
  -i ./api/openapi.yaml \\
  -g java \\
  -o ./clients/java \\
  --additional-properties=library=okhttp-gson

# Python å®¢æˆ¶ç«¯
openapi-generator-cli generate \\
  -i ./api/openapi.yaml \\
  -g python \\
  -o ./clients/python`)

defineProps<{
  section?: unknown
}>()

defineEmits<{
  complete: []
}>()
</script>

<style scoped>
.api-design-section {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
}

.section-intro {
  margin-bottom: 3rem;
}

.intro-text {
  font-size: 1.1rem;
  line-height: 1.6;
  color: #4a5568;
  margin-bottom: 2rem;
}

.learning-objectives {
  background: #f7fafc;
  padding: 1.5rem;
  border-radius: 8px;
  border-left: 4px solid #4299e1;
}

.learning-objectives h3 {
  margin: 0 0 1rem 0;
  color: #2d3748;
}

.learning-objectives ul {
  margin: 0;
  color: #4a5568;
}

.content-section {
  margin-bottom: 3rem;
}

.content-section h3 {
  color: #2d3748;
  margin-bottom: 1rem;
  font-size: 1.5rem;
}

.comparison-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
  margin: 2rem 0;
}

.comparison-item {
  padding: 1.5rem;
  border-radius: 8px;
  border: 2px solid;
}

.comparison-item.bad {
  background: #fef5e7;
  border-color: #ed8936;
}

.comparison-item.good {
  background: #f0fff4;
  border-color: #48bb78;
}

.comparison-item h4 {
  margin: 0 0 1rem 0;
  font-size: 1.1rem;
}

.flow-steps {
  margin: 1rem 0;
}

.step {
  padding: 0.5rem;
  margin: 0.5rem 0;
  background: rgba(255, 255, 255, 0.8);
  border-radius: 4px;
  font-size: 0.9rem;
}

.problems,
.benefits {
  margin-top: 1rem;
}

.problems ul,
.benefits ul {
  margin: 0.5rem 0;
  font-size: 0.9rem;
}

.dotnet-comparison {
  background: #edf2f7;
  padding: 2rem;
  border-radius: 8px;
  margin: 2rem 0;
  border-left: 4px solid #9f7aea;
}

.dotnet-comparison h4 {
  margin: 0 0 1rem 0;
  color: #2d3748;
}

.comparison-intro {
  margin: 0 0 2rem 0;
  color: #4a5568;
  line-height: 1.6;
  font-size: 1rem;
}

.comparison-section {
  margin: 2rem 0;
}

.comparison-item {
  margin: 1.5rem 0;
}

.comparison-item h5 {
  margin: 0 0 1rem 0;
  color: #4a5568;
  font-size: 1.1rem;
  font-weight: 600;
}

.comparison-divider {
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 2rem 0;
  position: relative;
}

.comparison-divider::before {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, #cbd5e0, transparent);
}

.divider-text {
  background: #edf2f7;
  padding: 0.5rem 1rem;
  color: #9f7aea;
  font-weight: 600;
  font-size: 0.9rem;
  border: 2px solid #9f7aea;
  border-radius: 20px;
  position: relative;
  z-index: 1;
}

.comparison-insights {
  margin: 2rem 0 0 0;
  background: white;
  padding: 1.5rem;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.comparison-insights h5 {
  margin: 0 0 1.5rem 0;
  color: #2d3748;
  font-size: 1rem;
}

.insights-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1rem;
}

/* éŸ¿æ‡‰å¼è¨­è¨ˆ */
@media (max-width: 768px) {
  .comparison-container,
  .comparison-grid,
  .tools-grid,
  .best-practices,
  .benefits-showcase,
  .scenario-comparison,
  .generator-features,
  .before-after,
  .insights-grid {
    grid-template-columns: 1fr;
  }
  
  .dotnet-comparison {
    padding: 1.5rem;
    margin: 1.5rem 0;
  }
  
  .comparison-intro {
    font-size: 0.95rem;
  }
  
  .comparison-item h5 {
    font-size: 1rem;
  }
  
  .insight-item {
    padding: 0.75rem;
  }
  
  .divider-text {
    font-size: 0.85rem;
    padding: 0.4rem 0.8rem;
  }
  
  .workflow-step {
    flex-direction: column;
  }
  
  .step-number {
    margin-right: 0;
    margin-bottom: 1rem;
  }
}

.insight-item {
  padding: 1rem;
  background: #f7fafc;
  border-radius: 6px;
  border-left: 3px solid #9f7aea;
}

.insight-item h6 {
  margin: 0 0 0.5rem 0;
  color: #2d3748;
  font-size: 0.9rem;
  font-weight: 600;
}

.insight-item p {
  margin: 0;
  color: #4a5568;
  font-size: 0.85rem;
  line-height: 1.4;
}

.tools-section {
  margin: 2rem 0;
}

.tools-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 1.5rem;
  margin: 1rem 0;
}

.tool-card {
  background: #fff;
  padding: 1.5rem;
  border-radius: 8px;
  border: 1px solid #e2e8f0;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.tool-card h5 {
  margin: 0 0 0.5rem 0;
  color: #2d3748;
  font-size: 1.1rem;
}

.tool-card p {
  margin: 0 0 1rem 0;
  color: #4a5568;
  font-size: 0.9rem;
}

.tool-card.featured {
  border: 2px solid #4299e1;
  background: linear-gradient(135deg, #ebf8ff 0%, #f7fafc 100%);
}

.openapi-generator-showcase {
  margin: 2rem 0;
  background: #f8f9fa;
  padding: 2rem;
  border-radius: 8px;
  border-left: 4px solid #4299e1;
}

.openapi-generator-showcase h4 {
  margin: 0 0 1rem 0;
  color: #2d3748;
}

.openapi-generator-showcase p {
  margin-bottom: 1.5rem;
  color: #4a5568;
  line-height: 1.6;
}

.openapi-generator-showcase a {
  color: #4299e1;
  text-decoration: none;
  font-weight: 500;
}

.openapi-generator-showcase a:hover {
  text-decoration: underline;
}

.generator-features {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.feature-category {
  background: white;
  padding: 1.5rem;
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.feature-category h5 {
  margin: 0 0 1rem 0;
  color: #2d3748;
  font-size: 1rem;
}

.language-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.lang-tag {
  padding: 0.25rem 0.75rem;
  background: #4299e1;
  color: white;
  border-radius: 16px;
  font-size: 0.75rem;
  font-weight: 500;
}

.lang-tag.more {
  background: #a0aec0;
}

.real-world-benefit {
  margin: 1.5rem 0;
  background: white;
  padding: 1.5rem;
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.real-world-benefit h5 {
  margin: 0 0 1rem 0;
  color: #2d3748;
}

.benefit-comparison {
  margin-top: 1rem;
}

.before-after {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
}

.before,
.after {
  padding: 1rem;
  border-radius: 6px;
}

.before {
  background: #fef5e7;
  border-left: 3px solid #ed8936;
}

.after {
  background: #f0fff4;
  border-left: 3px solid #48bb78;
}

.before h6,
.after h6 {
  margin: 0 0 0.5rem 0;
  font-size: 0.9rem;
}

.before ul,
.after ul {
  margin: 0;
  font-size: 0.85rem;
  color: #4a5568;
}

.generated-types-example {
  margin: 2rem 0;
}

.workflow-steps {
  margin: 2rem 0;
}

.workflow-step {
  display: flex;
  margin: 2rem 0;
  align-items: flex-start;
}

.step-number {
  width: 40px;
  height: 40px;
  background: #4299e1;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  margin-right: 1.5rem;
  flex-shrink: 0;
}

.step-content {
  flex: 1;
}

.step-content h4 {
  margin: 0 0 0.5rem 0;
  color: #2d3748;
}

.step-content p {
  margin: 0 0 1rem 0;
  color: #4a5568;
}

.best-practices {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin: 1rem 0;
}

.practice-category {
  background: #f7fafc;
  padding: 1.5rem;
  border-radius: 8px;
}

.practice-category h4 {
  margin: 0 0 1rem 0;
  color: #2d3748;
}

.practice-category ul {
  margin: 0;
  color: #4a5568;
}

.benefits-showcase {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 1.5rem;
  margin: 2rem 0;
}

.benefit-item {
  background: #f7fafc;
  padding: 1.5rem;
  border-radius: 8px;
  border-left: 4px solid #4299e1;
}

.benefit-item h4 {
  margin: 0 0 1rem 0;
  color: #2d3748;
  font-size: 1.1rem;
}

.benefit-item ul {
  margin: 0;
  color: #4a5568;
}

.benefit-item li {
  margin-bottom: 0.5rem;
}

.benefit-item strong {
  color: #2d3748;
}

.real-world-example {
  margin: 2rem 0;
  background: #f8f9fa;
  padding: 1.5rem;
  border-radius: 8px;
}

.real-world-example h4 {
  margin: 0 0 1.5rem 0;
  color: #2d3748;
  text-align: center;
}

.scenario-comparison {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.5rem;
}

.scenario-item {
  padding: 1.5rem;
  border-radius: 8px;
  border: 2px solid;
}

.scenario-item.without-types {
  background: #fef5e7;
  border-color: #ed8936;
}

.scenario-item.with-types {
  background: #f0fff4;
  border-color: #48bb78;
}

.scenario-item h5 {
  margin: 0 0 1rem 0;
  font-size: 1rem;
}

.scenario-problems p,
.scenario-benefits p {
  margin: 0 0 0.5rem 0;
  font-weight: 600;
  color: #2d3748;
}

.scenario-problems ul,
.scenario-benefits ul {
  margin: 0;
  color: #4a5568;
  font-size: 0.9rem;
}

.workflow-automation {
  margin: 2rem 0;
  background: #edf2f7;
  padding: 1.5rem;
  border-radius: 8px;
}

.workflow-automation h4 {
  margin: 0 0 1rem 0;
  color: #2d3748;
}

.section-summary {
  background: #edf2f7;
  padding: 2rem;
  border-radius: 8px;
  margin: 3rem 0;
}

.section-summary h3 {
  margin: 0 0 1.5rem 0;
  color: #2d3748;
  text-align: center;
}

.summary-points {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
}

.summary-point {
  background: white;
  padding: 1.5rem;
  border-radius: 8px;
  text-align: center;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.summary-point h4 {
  margin: 0 0 0.5rem 0;
  color: #4299e1;
}

.summary-point p {
  margin: 0;
  color: #4a5568;
  font-size: 0.9rem;
}
</style> 